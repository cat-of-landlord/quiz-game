<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <title>ä¸­å›½åä½³è¿åŠ¨å‘˜è¯†äººæŒ‘æˆ˜ (2016-2025)</title>
    <style>
      :root {
        --primary-color: #e60012;
        --success-color: #28a745;
        --danger-color: #dc3545;
        --bg-color: #f8f9fa;
        --gray-color: #6c757d;
      }

      body {
        font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
        margin: 0;
        padding-top: 180px;
        background-color: var(--bg-color);
      }

      .header-sticky {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 1000;
        background: white;
        box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
        padding: 15px 20px;
        text-align: center;
      }

      .header-sticky h2 {
        margin: 0 0 10px 0;
        font-size: 1.4rem;
        color: #333;
      }
      .input-group {
        display: flex;
        justify-content: center;
        gap: 10px;
        margin-bottom: 10px;
      }

      input {
        padding: 12px 20px;
        font-size: 16px;
        width: 350px;
        border: 2px solid #ddd;
        border-radius: 25px;
        outline: none;
        transition: border-color 0.3s;
      }
      input:focus {
        border-color: var(--primary-color);
      }

      .progress-container {
        max-width: 800px;
        margin: 5px auto;
        background: #eee;
        height: 10px;
        border-radius: 5px;
        overflow: hidden;
      }
      #progressBar {
        width: 0%;
        height: 100%;
        background: var(--primary-color);
        transition: width 0.3s;
      }

      .quiz-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
        gap: 20px;
        padding: 20px;
        max-width: 1300px;
        margin: 0 auto;
      }

      .quiz-card {
        background: white;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        border: 2px solid transparent;
        transition: all 0.3s;
        text-align: center;
      }
      .quiz-card.done {
        border-color: var(--success-color);
        transform: translateY(-5px);
      }
      .quiz-card.missed {
        border-color: var(--danger-color);
      }

      .img-container {
        width: 100%;
        aspect-ratio: 3 / 4;
        overflow: hidden;
        background: #eee;
        cursor: pointer;
      }
      .quiz-img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.3s;
      }
      .quiz-img:hover {
        transform: scale(1.05);
      }

      .card-info {
        padding: 10px;
      }
      .hint-tag {
        display: inline-block;
        background: #f0f0f0;
        color: #666;
        font-size: 12px;
        padding: 2px 8px;
        border-radius: 10px;
        margin-bottom: 5px;
      }
      .user-ans {
        font-weight: bold;
        font-size: 0.9rem;
        color: #333;
        min-height: 1.2em;
      }

      /* æ­£ç¡®ç‡è¿›åº¦æ¡ */
      .acc-bar-wrap {
        height: 4px;
        width: 80%;
        background: #eee;
        border-radius: 2px;
        margin: 5px auto;
        display: none;
      }
      .acc-bar-fill {
        height: 100%;
        border-radius: 2px;
      }

      .result-area {
        max-width: 800px;
        margin: 40px auto;
        background: white;
        padding: 30px;
        border-radius: 15px;
        text-align: center;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      }
      .stat-box {
        background: #fff5f5;
        border: 1px solid #ffccd0;
        padding: 20px;
        border-radius: 12px;
        margin: 20px 0;
        line-height: 1.8;
      }
      .stat-box span {
        font-weight: bold;
        color: var(--primary-color);
        font-size: 1.4rem;
      }

      button {
        padding: 10px 25px;
        border-radius: 20px;
        border: none;
        cursor: pointer;
        font-weight: bold;
      }
      #endBtn {
        background: var(--gray-color);
        color: white;
      }
      #restartBtn {
        background: var(--primary-color);
        color: white;
        margin-top: 15px;
      }

      /* å…¨å±æŸ¥çœ‹å™¨ */
      .viewer-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.9);
        z-index: 2000;
        justify-content: center;
        align-items: center;
      }
      .viewer-img {
        max-width: 90%;
        max-height: 85vh;
        border-radius: 5px;
      }
      .hidden {
        display: none;
      }
    </style>
  </head>
  <body>
    <div class="header-sticky">
      <button
        style="position: absolute; top: 15px; left: 15px"
        onclick="window.location.href='index.html'"
      >
        â† é¦–é¡µ
      </button>
      <h2>ğŸ‡¨ğŸ‡³ ä¸­å›½åä½³è¿åŠ¨å‘˜æŒ‘æˆ˜ (<span id="countInfo">0/68</span>)</h2>
      <div class="input-group">
        <input
          id="answerInput"
          type="text"
          placeholder="è¾“å…¥è¿åŠ¨å‘˜å§“åï¼Œå›è½¦ç¡®è®¤..."
          autofocus
        />
        <button onclick="endQuiz()" id="endBtn">æäº¤å¹¶æŸ¥çœ‹æ’å</button>
        <button onclick="location.reload()" id="restartBtn" class="hidden">
          é‡æ–°å¼€å§‹
        </button>
      </div>
      <div class="progress-container"><div id="progressBar"></div></div>
      <div
        id="message"
        style="
          height: 20px;
          font-size: 14px;
          margin-top: 5px;
          font-weight: bold;
        "
      ></div>
    </div>

    <div id="quizGrid" class="quiz-grid"></div>

    <div id="resultArea" class="result-area hidden">
      <h3>ğŸ† æŒ‘æˆ˜æŠ¥å‘Š</h3>
      <div class="stat-box" id="statSummary"></div>
    </div>

    <div
      id="imageViewer"
      class="viewer-overlay"
      onclick="this.style.display='none'"
    >
      <img id="fullscreenImg" class="viewer-img" src="" />
    </div>

    <script>
      // å¸¦æœ‰çŸ¥ååº¦æ•°æ®ï¼ˆaccï¼‰çš„è¿åŠ¨å‘˜åˆ—è¡¨
      const quizData = [
        { name: "ä¸å®", sport: "ä¹’ä¹“çƒ", file: "ä¸å®.webp", acc: 75 },
        { name: "ä¸ç«‹äºº", sport: "å›½é™…è±¡æ£‹", file: "ä¸ç«‹äºº.webp", acc: 38 },
        { name: "å…¨çº¢å©µ", sport: "è·³æ°´", file: "å…¨çº¢å©µ.webp", acc: 92 },
        { name: "å†¯çŠçŠ", sport: "é«˜å°”å¤«", file: "å†¯çŠçŠ.webp", acc: 25 },
        { name: "åˆ˜å›½æ¢", sport: "ä¹’ä¹“çƒ", file: "åˆ˜å›½æ¢.webp", acc: 90 },
        { name: "åˆ˜æ¸…æ¼ª", sport: "éœ¹é›³èˆ", file: "åˆ˜æ¸…æ¼ª.webp", acc: 22 },
        { name: "åˆ˜ç„•å", sport: "ä¸¾é‡", file: "åˆ˜ç„•å.webp", acc: 18 },
        { name: "åˆ˜è¯—é›¯", sport: "ä¹’ä¹“çƒ", file: "åˆ˜è¯—é›¯.webp", acc: 82 },
        { name: "å•å°å†›", sport: "ä¸¾é‡", file: "å•å°å†›.webp", acc: 65 },
        { name: "å­™æ¨", sport: "æ¸¸æ³³", file: "å­™æ¨.jpg", acc: 88 },
        { name: "å­™é¢–è", sport: "ä¹’ä¹“çƒ", file: "å­™é¢–è.webp", acc: 94 },
        { name: "å®«é‡‘æ°", sport: "åœºåœ°è‡ªè¡Œè½¦", file: "å®«é‡‘æ°.webp", acc: 28 },
        { name: "å±…æ–‡å›", sport: "å›½é™…è±¡æ£‹", file: "å±…æ–‡å›.webp", acc: 24 },
        { name: "å·©ç«‹å§£", sport: "é“…çƒ", file: "å·©ç«‹å§£.webp", acc: 68 },
        { name: "å¼ ä¹‹è‡»", sport: "ç½‘çƒ", file: "å¼ ä¹‹è‡».webp", acc: 45 },
        { name: "å¼ ä¼Ÿä¸½", sport: "ç»¼åˆæ ¼æ–—", file: "å¼ ä¼Ÿä¸½.webp", acc: 78 },
        { name: "å¼ é›¨éœ", sport: "æ¸¸æ³³", file: "å¼ é›¨éœ.webp", acc: 85 },
        { name: "å¾å˜‰ä½™", sport: "æ¸¸æ³³", file: "å¾å˜‰ä½™.webp", acc: 62 },
        { name: "å¾æ¢¦æ¡ƒ", sport: "è‡ªç”±å¼æ»‘é›ª", file: "å¾æ¢¦æ¡ƒ.webp", acc: 70 },
        { name: "å¾ç¿", sport: "æ‹³å‡»", file: "å¾ç¿.jpg", acc: 32 },
        { name: "æ–‡æ™“ç‡•", sport: "æ®‹å¥¥ç”°å¾„", file: "æ–‡æ™“ç‡•.webp", acc: 15 },
        { name: "æ–½å»·æ‡‹", sport: "è·³æ°´", file: "æ–½å»·æ‡‹.webp", acc: 55 },
        { name: "æ˜“å»ºè”", sport: "ç¯®çƒ", file: "æ˜“å»ºè”.webp", acc: 89 },
        { name: "æœ±å©·", sport: "æ’çƒ", file: "æœ±å©·.webp", acc: 86 },
        { name: "æ¨å€©", sport: "å°„å‡»", file: "æ¨å€©.webp", acc: 76 },
        { name: "æ¨å®¶ç‰", sport: "ç«èµ°", file: "æ¨å®¶ç‰.webp", acc: 35 },
        { name: "æ¨æ´ªç¼", sport: "è¶Šé‡æ»‘é›ª", file: "æ¨æ´ªç¼.webp", acc: 12 },
        { name: "æ¨æµšç‘„", sport: "æ¸¸æ³³", file: "æ¨æµšç‘„.webp", acc: 28 },
        { name: "æŸ¯æ´", sport: "å›´æ£‹", file: "æŸ¯æ´.webp", acc: 74 },
        { name: "æ­¦å¤§é–", sport: "çŸ­é“é€Ÿæ»‘", file: "æ­¦å¤§é–.webp", acc: 80 },
        { name: "æ­¦ç£Š", sport: "è¶³çƒ", file: "æ­¦ç£Š.webp", acc: 84 },
        { name: "æ±ªé¡º", sport: "æ¸¸æ³³", file: "æ±ªé¡º.webp", acc: 72 },
        { name: "æ½˜å±•ä¹", sport: "æ¸¸æ³³", file: "æ½˜å±•ä¹.webp", acc: 88 },
        { name: "ç‹å˜‰ç”·", sport: "è·³è¿œ", file: "ç‹å˜‰ç”·.webp", acc: 34 },
        { name: "ç‹æ¥šé’¦", sport: "ä¹’ä¹“çƒ", file: "ç‹æ¥šé’¦.webp", acc: 91 },
        { name: "ç‹é•‡", sport: "ç«èµ°", file: "ç‹é•‡.webp", acc: 26 },
        { name: "ç‹éœœ", sport: "è¶³çƒ", file: "ç‹éœœ.jpg", acc: 60 },
        { name: "ç››æè±ª", sport: "å°„å‡»", file: "ç››æè±ª.webp", acc: 78 },
        { name: "çŸ³å®‡å¥‡", sport: "ç¾½æ¯›çƒ", file: "çŸ³å®‡å¥‡.webp", acc: 65 },
        { name: "ç½—é™", sport: "ç™»å±±", file: "ç½—é™.jpg", acc: 10 },
        { name: "è‚–è‹¥è…¾", sport: "ä½“æ“", file: "è‚–è‹¥è…¾.webp", acc: 58 },
        { name: "èƒ¡å‡¯", sport: "ç”°å¾„", file: "èƒ¡å‡¯.webp", acc: 40 },
        { name: "è‹ç‚³æ·»", sport: "çŸ­è·‘", file: "è‹ç‚³æ·».webp", acc: 95 },
        { name: "è‹ç¿Šé¸£", sport: "å•æ¿æ»‘é›ª", file: "è‹ç¿Šé¸£.webp", acc: 83 },
        { name: "è‘£æ´ªå¨Ÿ", sport: "ç™»å±±", file: "è‘£æ´ªå¨Ÿ.jpg", acc: 8 },
        { name: "è’‹è£•ç‡•", sport: "æ®‹å¥¥æ¸¸æ³³", file: "è’‹è£•ç‡•.webp", acc: 14 },
        { name: "è”¡é›ªæ¡", sport: "å•æ¿æ»‘é›ª", file: "è”¡é›ªæ¡.webp", acc: 20 },
        { name: "è¦ƒæµ·æ´‹", sport: "æ¸¸æ³³", file: "è¦ƒæµ·æ´‹.webp", acc: 75 },
        { name: "è°¢éœ‡ä¸š", sport: "çŸ­è·‘", file: "è°¢éœ‡ä¸š.webp", acc: 66 },
        { name: "è°·çˆ±å‡Œ", sport: "è‡ªç”±å¼æ»‘é›ª", file: "è°·çˆ±å‡Œ.webp", acc: 93 },
        { name: "èµµå¸…", sport: "è·†æ‹³é“", file: "èµµå¸….webp", acc: 42 },
        { name: "é‚“æ™ºç‘„", sport: "æ­¦æœ¯", file: "é‚“æ™ºç‘„.webp", acc: 11 },
        { name: "é‚“è–‡", sport: "ä¸¾é‡", file: "é‚“è–‡.webp", acc: 31 },
        { name: "é‚“é›…æ–‡", sport: "å°è½®è½¦", file: "é‚“é›…æ–‡.webp", acc: 33 },
        { name: "é‚¹æ•¬å›­", sport: "ä½“æ“", file: "é‚¹æ•¬å›­.webp", acc: 52 },
        { name: "éƒ‘é’¦æ–‡", sport: "ç½‘çƒ", file: "éƒ‘é’¦æ–‡.webp", acc: 94 },
        { name: "éƒ­å·", sport: "å¸†èˆ¹", file: "éƒ­å·.webp", acc: 38 },
        { name: "é’Ÿå¤©ä½¿", sport: "åœºåœ°è‡ªè¡Œè½¦", file: "é’Ÿå¤©ä½¿.webp", acc: 41 },
        { name: "é—«å­è´", sport: "æ¸¸æ³³", file: "é—«å­è´.webp", acc: 25 },
        { name: "é™ˆæ¢¦", sport: "ä¹’ä¹“çƒ", file: "é™ˆæ¢¦.webp", acc: 87 },
        { name: "é™ˆè‰¾æ£®", sport: "è·³æ°´", file: "é™ˆè‰¾æ£®.webp", acc: 48 },
        { name: "é™ˆèŠ‹æ±", sport: "è·³æ°´", file: "é™ˆèŠ‹æ±.webp", acc: 86 },
        { name: "é™ˆé›¨è²", sport: "ç¾½æ¯›çƒ", file: "é™ˆé›¨è².webp", acc: 79 },
        { name: "éš‹æ–‡é™", sport: "èŠ±æ ·æ»‘å†°", file: "éš‹æ–‡é™.webp", acc: 62 },
        { name: "éŸ©å¤©å®‡", sport: "çŸ­é“é€Ÿæ»‘", file: "éŸ©å¤©å®‡.webp", acc: 44 },
        { name: "éŸ©èª", sport: "èŠ±æ ·æ»‘å†°", file: "éŸ©èª.webp", acc: 61 },
        { name: "é©¬é¾™", sport: "ä¹’ä¹“çƒ", file: "é©¬é¾™.webp", acc: 96 },
        { name: "é«˜äº­å®‡", sport: "é€Ÿåº¦æ»‘å†°", file: "é«˜äº­å®‡.webp", acc: 59 },
      ];

      let correctIndices = [];
      let isEnded = false;
      const input = document.getElementById("answerInput");

      function init() {
        const grid = document.getElementById("quizGrid");
        quizData.forEach((item, i) => {
          const card = document.createElement("div");
          card.className = "quiz-card";
          card.id = `card-${i}`;
          const barColor =
            item.acc > 70 ? "#28a745" : item.acc > 40 ? "#ffc107" : "#dc3545";
          card.innerHTML = `
                <div class="img-container" onclick="viewImg('ä¸­å›½åä½³è¿åŠ¨å‘˜/${item.file}')">
                    <img src="ä¸­å›½åä½³è¿åŠ¨å‘˜/${item.file}" class="quiz-img">
                </div>
                <div class="card-info">
                    <div class="hint-tag">${item.sport}</div>
                    <div id="ans-${i}" class="user-ans">? ? ?</div>
                    <div class="acc-bar-wrap" id="acc-wrap-${i}">
                        <div class="acc-bar-fill" style="width:${item.acc}%; background:${barColor}"></div>
                        <div style="font-size:9px; color:#999; margin-top:2px">çŸ¥ååº¦: ${item.acc}%</div>
                    </div>
                </div>
            `;
          grid.appendChild(card);
        });
        updateProgress();
      }

      function viewImg(src) {
        document.getElementById("fullscreenImg").src = src;
        document.getElementById("imageViewer").style.display = "flex";
      }

      input.addEventListener("keydown", (e) => {
        if (e.key === "Enter" && !isEnded) {
          const val = input.value.trim();
          const idx = quizData.findIndex((d) => d.name === val);
          if (idx !== -1 && !correctIndices.includes(idx)) {
            correctIndices.push(idx);
            document.getElementById(`card-${idx}`).classList.add("done");
            document.getElementById(`ans-${idx}`).innerText = val;
            document
              .getElementById(`card-${idx}`)
              .scrollIntoView({ behavior: "smooth", block: "center" });
            document.getElementById("message").innerHTML = "âœ… è¯†åˆ«æ­£ç¡®ï¼";
          } else if (idx !== -1) {
            document.getElementById("message").innerHTML = "âš  å·²ç»ç­”è¿‡äº†";
          } else {
            document.getElementById("message").innerHTML =
              "âŒ æœªåŒ¹é…ï¼Œè¯·æ£€æŸ¥å§“åæ˜¯å¦æ­£ç¡®";
          }
          input.value = "";
          updateProgress();
        }
      });

      function updateProgress() {
        const count = correctIndices.length;
        document.getElementById(
          "countInfo"
        ).innerText = `${count}/${quizData.length}`;
        document.getElementById("progressBar").style.width = `${
          (count / quizData.length) * 100
        }%`;
      }

      // ç»Ÿè®¡è®¡ç®—é€»è¾‘
      function calculatePercentile(score) {
        const mean = 22.5; // é¢„è®¾å¹³å‡åˆ†
        const stdDev = 12.0;
        const z = (score - mean) / stdDev;
        const t = 1 / (1 + 0.2315419 * Math.abs(z));
        const d = 0.3989423 * Math.exp((-z * z) / 2);
        let prob =
          d *
          t *
          (0.3193815 +
            t * (-0.3565638 + t * (1.781478 + t * (-1.821256 + t * 1.330274))));
        if (z > 0) prob = 1 - prob;
        return Math.round(prob * 1000) / 10;
      }

      function endQuiz() {
        isEnded = true;
        input.disabled = true;
        quizData.forEach((item, i) => {
          document.getElementById(`acc-wrap-${i}`).style.display = "block";
          if (!correctIndices.includes(i)) {
            document.getElementById(`card-${i}`).classList.add("missed");
            document.getElementById(
              `ans-${i}`
            ).innerHTML = `<span style="color:var(--danger-color)">${item.name}</span>`;
          }
        });

        const score = correctIndices.length;
        const percentile = calculatePercentile(score);
        document.getElementById("statSummary").innerHTML = `
            ä½ è®¤å‡ºäº† <span>${score}</span> / 68 ä½é¡¶çº§è¿åŠ¨å‘˜ï¼<br>
            ä½ çš„ä½“è‚²ç´ å…»è¶…è¿‡äº†å…¨çƒ <span>${percentile}%</span> çš„æŒ‘æˆ˜è€…ã€‚<br>
            å…¨çƒæŒ‘æˆ˜è€…å¹³å‡åˆ†ä¸º <span>22.5</span> åˆ†ã€‚
        `;
        document.getElementById("resultArea").classList.remove("hidden");
        document.getElementById("restartBtn").classList.remove("hidden");
        document.getElementById("endBtn").classList.add("hidden");
        window.scrollTo({
          top: document.body.scrollHeight,
          behavior: "smooth",
        });
      }

      init();
    </script>
  </body>
</html>
